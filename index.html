<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Constant Contact Ruby SDK for AppConnect</h1>

<p>The Ruby SDK for AppConnect allows you to leverage the AppConnect v2 APIs.</p>

<p><a href="https://travis-ci.org/constantcontact/ruby-sdk"><img src="https://travis-ci.org/constantcontact/ruby-sdk.png" alt="Build Status"></a></p>

<h1>Installation</h1>

<p>Via bundler:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>constantcontact</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>~&gt; 2.1.0</span><span class='tstring_end'>'</span></span>
</code></pre>

<p>Otherwise:</p>

<pre class="code bash"><code class="bash">[sudo|rvm] gem install constantcontact
</code></pre>

<h1>Configuration</h1>

<p>The AppConnect SDK can be configured with some options globally or they can be specified when creating the API client:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>ConstantContact</span><span class='op'>::</span><span class='const'>Util</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_configure'>configure</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
  <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:auth</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:api_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your-access-key</span><span class='tstring_end'>'</span></span>
  <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:auth</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:api_secret</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your-access-secret</span><span class='tstring_end'>'</span></span>
  <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:auth</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:redirect_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https://example.com/auth/constantcontact</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span>
</code></pre>

<h1>Documentation</h1>

<p>SDK Documentation is hosted at <a href="http://constantcontact.github.io/ruby-sdk">http://constantcontact.github.io/ruby-sdk</a></p>

<p>API Documentation is located at <a href="http://developer.constantcontact.com/docs/developer-guides/api-documentation-index.html">http://developer.constantcontact.com/docs/developer-guides/api-documentation-index.html</a></p>

<h1>Getting Started</h1>

<p>AppConnect requires an OAuth access token which will give your app access to Constant Contact data and services for the accout that granted that access token.</p>

<h1>Rails</h1>

<p>Create a new controller action.  The redirect_url should be the same as the one given when registering the app with Mashery. Use the following code snippet to get an access token:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@oauth</span> <span class='op'>=</span> <span class='const'>ConstantContact</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>OAuth2</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='symbol'>:api_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your api key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='symbol'>:api_secret</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your secret key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='symbol'>:redirect_url</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your redirect url</span><span class='tstring_end'>'</span></span> <span class='comment'># the URL given when registering your app with Mashery.
</span><span class='rparen'>)</span>

<span class='ivar'>@error</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span>
<span class='ivar'>@user</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
<span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span>

<span class='kw'>if</span> <span class='ivar'>@code</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='ivar'>@oauth</span><span class='period'>.</span><span class='id identifier rubyid_get_access_token'>get_access_token</span><span class='lparen'>(</span><span class='ivar'>@code</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>access_token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='op'>=</span> <span class='const'>ConstantContact</span><span class='op'>::</span><span class='const'>Api</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your api key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='rparen'>)</span>
    <span class='ivar'>@contacts</span> <span class='op'>=</span> <span class='id identifier rubyid_cc'>cc</span><span class='period'>.</span><span class='id identifier rubyid_get_contacts'>get_contacts</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>else</span>
  <span class='comment'># if not code param is provided redirect into the OAuth flow
</span>  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='ivar'>@oauth</span><span class='period'>.</span><span class='id identifier rubyid_get_authorization_url'>get_authorization_url</span> <span class='kw'>and</span> <span class='kw'>return</span>
<span class='kw'>end</span>
</code></pre>

<p>Create a view for the above mentioned action with the following code:</p>

<pre class="code erb"><code class="erb">
&lt;% if @error %&gt;
  &lt;p&gt;&lt;%= @error %&gt;&lt;/p&gt;
&lt;% end %&gt;

&lt;% if @contacts.present? %&gt;
  &lt;% @contacts.each do |contact| %&gt;
    &lt;p&gt;Contact name: &lt;%= &quot;#{contact.first_name} #{contact.last_name}&quot; %&gt;&lt;/p&gt;
  &lt;% end %&gt;
&lt;% end %&gt;
</code></pre>

<p>The first time you access the action you will be redirected into the Constant Contact OAuth flow.
Then you will be redirected back to your action and you should see the list of contacts.</p>

<h1>Sinatra</h1>

<p>Require AppConnect:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>constantcontact</span><span class='tstring_end'>'</span></span>
</code></pre>

<p>Add the following route.  The redirect_url should be the same given when registering the app with Mashery.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/my_url</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span>
  <span class='ivar'>@oauth</span> <span class='op'>=</span> <span class='const'>ConstantContact</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>OAuth2</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='symbol'>:api_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your api key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='symbol'>:api_secret</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your secret key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
    <span class='symbol'>:redirect_url</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your redirect url</span><span class='tstring_end'>'</span></span>
  <span class='rparen'>)</span>

  <span class='ivar'>@error</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span>
  <span class='ivar'>@user</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='ivar'>@code</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='ivar'>@oauth</span><span class='period'>.</span><span class='id identifier rubyid_get_access_token'>get_access_token</span><span class='lparen'>(</span><span class='ivar'>@code</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span>
      <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>access_token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='op'>=</span> <span class='const'>ConstantContact</span><span class='op'>::</span><span class='const'>Api</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your api key</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='rparen'>)</span>
      <span class='ivar'>@contacts</span> <span class='op'>=</span> <span class='id identifier rubyid_cc'>cc</span><span class='period'>.</span><span class='id identifier rubyid_get_contacts'>get_contacts</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_erb'>erb</span> <span class='symbol'>:my_view</span>
<span class='kw'>end</span>
</code></pre>

<p>Create a my_view.erb with the following code:</p>

<pre class="code ruby"><code class="ruby">&lt;% if @error %&gt;
  &lt;p&gt;&lt;%=@error%&gt;&lt;/p&gt;
&lt;% end %&gt;

&lt;% if @code %&gt;
  &lt;% if @contacts %&gt;
    &lt;% @contacts.each do |contact| %&gt;
      &lt;p&gt;\Contact name: &lt;%= &quot;#{contact.first_name} #{contact.last_name}&quot; %&gt;&lt;/p&gt;
    &lt;% end %&gt;
  &lt;% end %&gt;
&lt;% else %&gt;
  &lt;a href=&quot;&lt;%=@oauth.get_authorization_url%&gt;&quot;&gt;Click to authorize&lt;/a&gt;
&lt;% end %&gt;
</code></pre>

<p>The first time you access the action in browser you should see the &quot;Click to authorize&quot; link.
Follow the link, go through all the Constant Contact steps required 
and then you will be redirected back to your action and you should see the list of contacts.</p>
</div></div>

    <div id="footer">
  Generated on Fri Jun 26 10:09:22 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-1.9.3).
</div>

  </body>
</html>